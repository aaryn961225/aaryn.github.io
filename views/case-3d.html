<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Case – 3D Dog Interaction Demo｜行為樹 × 物理模擬互動設計</title>
  <link rel="stylesheet" href="../styles/main.css" />

  <style>
    .iframe-container {
      width: 100%;
      max-width: 1000px;
      aspect-ratio: 16 / 9;
      border: 1px solid #e2e8f0;
      border-radius: 16px;
      overflow: hidden;
      margin: 40px auto;
      background: #0f172a;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }

    .iframe-container iframe {
      width: 100%;
      height: 100%;
      border: 0;
    }

    .demo-caption {
      text-align: center;
      font-size: 14px;
      margin-top: 12px;
      color: #64748b;
      font-style: italic;
    }

    .code-highlight {
      background: #f8fafc;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: monospace;
      color: #e11d48;
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="logo">
        <span class="logo-mark">JH</span>
        <span class="logo-text">Jinghuei / <strong>UX Design</strong></span>
      </div>
    </div>
  </header>

  <main class="case-layout">
    <div class="container">
      <a href="../index.html" class="back-link">← Back to Home</a>

      <h1>Meadow Fetch Time｜行為樹 AI × 3D 物理互動實驗</h1>
      <p class="case-meta">
        <strong>Role：</strong>全棧開發 (UX / Logic Architecture / Three.js Implementation)<br>
        <strong>Tech Stack：</strong>Three.js, Ammo.js (Physics), Vanilla JS (Behavior Tree), GLTF/Draco
      </p>

      <h2 class="case-section-title">可互動 3D Demo</h2>
      <p>這是我獨立開發的一個 3D 互動實驗，旨在探索如何將複雜的 AI 行為拆解為可維護的邏輯節點，並結合物理引擎提升互動的真實感。</p>

      <div class="iframe-container">
        <iframe src="./behaviorTree/behaviorTree_dog.html" loading="lazy" allowfullscreen></iframe>
      </div>
      <p class="demo-caption">▲ 操作指南：長按滑鼠左/右鍵進行「蓄力丟球」，觀察狗狗如何根據行為樹決策路徑。</p>

      <h2 class="case-section-title">核心設計：行為樹架構 (Behavior Tree)</h2>
      <p>
        為了讓狗狗的行為看起來自然且具備擴充性，我實作了一套行為樹系統。將邏輯拆分為 <span class="code-highlight">Selector</span> (選擇分支) 與 <span
          class="code-highlight">Sequence</span> (順序執行) 節點：
      </p>



      <ul>
        <li><strong>決策優先順序：</strong>系統優先檢查狗狗嘴裡是否有球。若有，優先啟動 <span
            class="code-highlight">ReturnHomeNode</span>；若無，則進入尋球分支。</li>
        <li><strong>環境感應 (Blackboard)：</strong>狗狗會持續監控場景資料（如球的位置、是否即將掉出邊界），這些資料存儲於 Blackboard 中，供所有節點共享判斷。</li>
        <li><strong>自動化路徑：</strong>當球被丟出，<span class="code-highlight">SeekBallNode</span> 會計算最優追逐路徑，並在接近時無縫切換至動畫與物理撿拾邏輯。
        </li>
      </ul>

      <h2 class="case-section-title">UX 考量與物理細節</h2>
      <p>在實作過程中，我透過程式碼解決了多個影響「感受」的設計問題：</p>
      <ul>
        <li><strong>蓄力回饋 (HUD)：</strong>設計了視效與蓄力映射公式（Min/Max Speed 映射），讓使用者能直覺感受丟球力度。</li>
        <li><strong>邊界預測 (Edge Safety)：</strong>在程式中加入 <span class="code-highlight">PREDICT_T</span> 預測邏輯。若球的物理速度過快即將掉出
          40x40 的地圖邊界，狗狗會判斷為「不可追蹤」，避免產生無效行為。</li>
        <li><strong>物理銜接 (Reparenting)：</strong>當狗狗撿起球時，我實作了 <span
            class="code-highlight">reparentPreserveWorldScale</span> 函式，確保球在從物理世界切換到狗狗嘴巴（骨骼掛載）時，視覺大小與座標保持平滑一致。</li>
        <li><strong>情感化設計：</strong>整合隨機吠叫音效與隨機觸發的「愛心泡泡」動畫，增加互動中的心理情緒反饋。</li>
      </ul>

      <h2 class="case-section-title">技術實現與工程協作價值</h2>
      <p>這個專案展現了我作為 UX 設計師在技術團隊中的特殊價值：</p>
      <ul>
        <li><strong>降低開發溝通成本：</strong>我能直接理解並撰寫 Three.js 與物理引擎代碼，能精準與工程師討論動態行為的技術限制。</li>
        <li><strong>規格可視化：</strong>行為樹的設計方式可以直接轉化為開發規格文件，讓複雜的 AI 互動變得可測試、可預測。</li>
        <li><strong>效能與體驗平衡：</strong>透過實作如 KTX2 貼圖載入、草地執行優化等，我在追求視覺體驗的同時也兼顧了瀏覽器的運作效能。</li>
      </ul>

      <h2 class="case-section-title">成效與收穫</h2>
      <ul>
        <li>成功將抽象的行為邏輯具象化，建立一套可重複使用的 3D 互動開發範式。</li>
        <li>深入掌握了物理引擎 (Ammo.js) 與動畫狀態機 (AnimationMixer) 的結合應用。</li>
        <li><strong>這是我在處理複雜邏輯與跨維度互動設計時，最具代表性的實踐案例。</strong></li>
      </ul>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>© <span id="year">2024</span> Jinghuei. Optimized for System UX Showcase.</p>
    </div>
  </footer>
</body>

</html>